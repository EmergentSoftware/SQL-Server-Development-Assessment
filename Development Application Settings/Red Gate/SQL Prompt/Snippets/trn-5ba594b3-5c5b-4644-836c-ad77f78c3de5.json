{
  "id": "5ba594b3-5c5b-4644-836c-ad77f78c3de5",
  "prefix": "trn",
  "description": "ES: Wrap the selected text in a transaction uncomment for concurrency catch if needed.",
  "body": "BEGIN TRY\r\n    BEGIN TRANSACTION;\r\n\r\n    $SELECTEDTEXT$\r\n\r\n    /* \r\n      IF @@ROWCOUNT = 0\r\n              BEGIN\r\n                  ; THROW 52001, 'The record you attempted to delete was modified by another user after you received the original values! The delete operation was canceled. If you still want to delete this record, click the Delete button again.', 1;\r\n                  ; THROW 52001, 'The record you attempted to save was modified by another user after you received the original values! The save operation was canceled, and the current values have been displayed. If you still want to update this record, click the Save button again.', 1;\r\n              /* Use RAISERROR below if you do not need a hard error thrown.\r\n              RAISERROR(N'The record you attempted to delete was modified by another user after you received the original values! The delete operation was canceled. If you still want to delete this record, click the Delete button again.', 1, 1) WITH NOWAIT;\r\n              RETURN -1;*/\r\n              END; \r\n    */\r\n\r\n    COMMIT TRANSACTION;\r\nEND TRY\r\nBEGIN CATCH\r\n    IF @@TRANCOUNT > 0\r\n        BEGIN\r\n            ROLLBACK TRANSACTION;\r\n        END;\r\n\r\n    /* Handle the error here, cleanup, et cetera.\r\n       In most cases it is best to bubble up (THROW) the error to the application/client to be displayed to the user and logged.\r\n    */\r\n    THROW;\r\nEND CATCH;"
}